def AGENT_LABEL = null
AGENT_LABEL = "JenkinsAgent"

pipeline{
  //agent any
  //node('JenkinsAgent')
   agent {
       label "${AGENT_LABEL}"
    }
  options { //Specifying a global execution timeout of one hour, after which Jenkins will abort the Pipeline run.
        timeout(time: 1, unit: 'HOURS')
  stages {
    stage ('docker build'){
      steps {
        scripts {
          sh "docker build -f 02-primer-pipeline/Dockerfile -t caosbinario/homer_page:1.0.0-${BUILD_ID} 02-primer-pipeline"
        }
      }
    }
    stage ('docker push'){
      steps {
        scripts {
          sh "docker push caosbinario/homer_page:1.0.0-${BUILD_ID}"
        }
      }
    }
  }
 post { 
        always { 
            echo 'I will always say Hello again!'
        }
    }   
}
